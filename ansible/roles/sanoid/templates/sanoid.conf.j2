# Sanoid ZFS snapshot configuration
# Generated by Ansible - do not edit manually

{% for dataset in sanoid_datasets %}
[{{ dataset.path }}]
        use_template = {{ dataset.template }}
{% if dataset.process_children_only is defined and dataset.process_children_only %}
        process_children_only = yes
{% endif %}
{% if dataset.recursive is defined and dataset.recursive %}
        recursive = yes
{% endif %}

{% endfor %}
{% for exclusion in sanoid_exclusions %}
[{{ exclusion.path }}]
        autosnap = no
        autoprune = no
        monitor = no

{% endfor %}
{% for template_name, template_config in sanoid_templates.items() %}
[template_{{ template_name }}]
        frequently = {{ template_config.frequently | default(0) }}
        hourly = {{ template_config.hourly | default(0) }}
        daily = {{ template_config.daily | default(0) }}
        weekly = {{ template_config.weekly | default(0) }}
        monthly = {{ template_config.monthly | default(0) }}
        yearly = {{ template_config.yearly | default(0) }}
        autosnap = {{ template_config.autosnap | default('yes') }}
        autoprune = {{ template_config.autoprune | default('yes') }}

{% endfor %}
